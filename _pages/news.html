---
layout: page
permalink: /news/
---

<style>
  .carousel-container {
    position: relative;
    width: 100%;         /* fill width */
    max-width: 600px;
    aspect-ratio: 1 / 1; /* height = width */
    margin: 1rem auto;
    overflow: hidden;
    box-sizing: border-box; /* ensure padding included in width */
    padding: 0;  /* no left-right padding */
    cursor: grab; /* Show grab cursor for dragging */
  }

  .carousel-container:active {
    cursor: grabbing; /* Show grabbing cursor when dragging */
  }

  .carousel-track {
    display: flex;
    transition: transform 0.5s ease-in-out;
    width: 100%;
  }

  .carousel-track.no-transition {
    transition: none; /* Disable transition during drag */
  }

  .article {
    flex: 0 0 100%; /* Each slide takes 100% of container width */
    height: 100%;
    position: relative; /* Enable positioning for overlay */
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 0; /* Remove padding since we're overlaying */
    box-sizing: border-box;
    background: #fff;
    border-radius: 10px;
    overflow: hidden; /* Ensure content doesn't spill out */
    user-select: none; /* Prevent text selection during drag */
  }

  .article img {
    width: 100%;
    height: 100%;
    object-fit: cover; /* Fill the entire container */
    border-radius: 6px;
    display: block;
    pointer-events: none; /* Prevent image drag */
  }

  .content {
    position: absolute; /* Position over the image */
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%); /* Center the content */
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    padding: 1rem;
    box-sizing: border-box;
    background: rgba(255, 255, 255, 0.5); /* Semi-transparent overlay just behind text */
    color: white; /* White text for contrast */
    text-align: center;
    border-radius: 20px; /* Rounded corners for the text overlay */
    width: 80%; /* Prevent text area from being too wide */
  }
  
  h1 {
    text-align: center;
    margin-bottom: 1rem;
    color: rgb(0, 0, 0); /* Ensure h1 is also white */
  }

  .content h2 {
    margin: 0 0 0.5rem;
    font-size: 2.5rem;
    color: rgb(0, 0, 0);
  }

  .content p {
    margin: 0 0 0.5rem;
    color: rgb(0, 0, 0);
    font-size: 1.2rem;
  }

  .date {
    color: #000000; /* Lighter color for date */
    font-size: 1em;
  }

  a {
    color: #000000; /* Lighter blue for better visibility on dark background */
    text-decoration: none;
  }

  a:hover {
    text-decoration: underline;
    color: #242424; /* Even lighter on hover */
  }

  .carousel-buttons {
    text-align: center;
    margin-top: 1rem;
  }

  .carousel-buttons button {
    padding: 0.5rem 1rem;
    margin: 0 0.5rem;
    font-size: 1rem;
    cursor: pointer;
    background: #9f9f9f;
    color: white;
    border: none;
    border-radius: 5px;
  }

</style>

<h1>üì∞ The New York Times</h1>
<div class="carousel-container" id="carousel-container">
  <div id="nyt-carousel" class="carousel-track"></div>
</div>
<div class="carousel-buttons">
  <button onclick="moveSlide(-1)">‚è™ Prev</button>
  <button onclick="moveSlide(1)">Next ‚è©</button>
</div>

<script>
  let currentIndex = 0;
  let totalSlides = 0;
  
  // Swipe/drag functionality
  let startX = 0;
  let currentX = 0;
  let isDragging = false;
  let startTransform = 0;

  async function fetchnytRSS(url) {
    const res = await fetch(`https://api.rss2json.com/v1/api.json?rss_url=${encodeURIComponent(url)}`);
    const data = await res.json();
    return data.items;
  }

  function renderCarousel(items) {
    const container = document.getElementById('nyt-carousel');
    container.innerHTML = '';
    items.forEach(item => {
      const article = document.createElement('div');
      article.className = 'article';

      const image = document.createElement('img');
      const imageUrl =
        item.thumbnail && item.thumbnail.trim()
          ? item.thumbnail
          : item.enclosure?.link || 'https://dummyimage.com/600x600/000/000000.png';
      image.src = imageUrl;
      image.alt = 'Thumbnail';

      const content = document.createElement('div');
      content.className = 'content';

      const title = document.createElement('h2');
      const link = document.createElement('a');
      link.href = 'http://archive.is/newest/' + item.link;
      link.target = '_blank';
      link.rel = 'noopener noreferrer';
      link.textContent = item.title;
      title.appendChild(link);

      const desc = document.createElement('p');
      desc.innerHTML = item.description || '';

      const pubDate = document.createElement('div');
      pubDate.className = 'date';
      pubDate.textContent = new Date(item.pubDate).toLocaleString();

      content.appendChild(title);
      content.appendChild(desc);
      content.appendChild(pubDate);

      article.appendChild(image);
      article.appendChild(content);
      container.appendChild(article);
    });
    totalSlides = items.length;
    setupSwipeEvents();
  }

  function moveSlide(direction) {
    const container = document.getElementById('nyt-carousel');
    if (totalSlides === 0) return;

    currentIndex += direction;
    if (currentIndex < 0) currentIndex = totalSlides - 1;
    if (currentIndex >= totalSlides) currentIndex = 0;

    updateCarouselPosition();
  }

  function updateCarouselPosition() {
    const container = document.getElementById('nyt-carousel');
    container.style.transform = `translateX(-${currentIndex * 100}%)`;
  }

  function setupSwipeEvents() {
    const carousel = document.getElementById('carousel-container');
    const track = document.getElementById('nyt-carousel');

    // Touch events for mobile
    carousel.addEventListener('touchstart', handleStart, { passive: false });
    carousel.addEventListener('touchmove', handleMove, { passive: false });
    carousel.addEventListener('touchend', handleEnd, { passive: false });

    // Mouse events for desktop
    carousel.addEventListener('mousedown', handleStart);
    carousel.addEventListener('mousemove', handleMove);
    carousel.addEventListener('mouseup', handleEnd);
    carousel.addEventListener('mouseleave', handleEnd);

    // Prevent context menu on right click during drag
    carousel.addEventListener('contextmenu', e => {
      if (isDragging) e.preventDefault();
    });
  }

  function getX(e) {
    return e.touches ? e.touches[0].clientX : e.clientX;
  }

  function handleStart(e) {
    isDragging = true;
    startX = getX(e);
    currentX = startX;
    startTransform = currentIndex * 100;
    
    const track = document.getElementById('nyt-carousel');
    track.classList.add('no-transition');
    
    e.preventDefault();
  }

  function handleMove(e) {
    if (!isDragging) return;
    
    currentX = getX(e);
    const deltaX = currentX - startX;
    const containerWidth = document.getElementById('carousel-container').offsetWidth;
    const movePercent = (deltaX / containerWidth) * 100;
    
    const track = document.getElementById('nyt-carousel');
    track.style.transform = `translateX(-${startTransform - movePercent}%)`;
    
    e.preventDefault();
  }

  function handleEnd(e) {
    if (!isDragging) return;
    
    isDragging = false;
    const deltaX = currentX - startX;
    const containerWidth = document.getElementById('carousel-container').offsetWidth;
    const threshold = containerWidth * 0.2; // 20% of container width
    
    const track = document.getElementById('nyt-carousel');
    track.classList.remove('no-transition');
    
    if (Math.abs(deltaX) > threshold) {
      if (deltaX > 0) {
        // Swiped right - go to previous slide
        moveSlide(-1);
      } else {
        // Swiped left - go to next slide
        moveSlide(1);
      }
    } else {
      // Snap back to current slide
      updateCarouselPosition();
    }
  }

  // Keyboard navigation
  document.addEventListener('keydown', (e) => {
    if (e.key === 'ArrowLeft') {
      moveSlide(-1);
    } else if (e.key === 'ArrowRight') {
      moveSlide(1);
    }
  });

  fetchnytRSS('https://rss.nytimes.com/services/xml/rss/nyt/World.xml')
    .then(renderCarousel)
    .catch(err => {
      document.getElementById('nyt-carousel').innerText = 'Failed to load feed.';
      console.error(err);
    });
</script>