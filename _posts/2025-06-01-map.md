---
layout: default
title: Map
permalink: /map/
---

A map of southern Africa.

<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" crossorigin />
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" crossorigin></script>
<script src="https://unpkg.com/pmtiles@3.0.5/dist/pmtiles.js"></script>

<div id="map" style="height: 500px; width: 100%; margin-top: 1em;"></div>

<script>
document.addEventListener("DOMContentLoaded", async function () {
  // 1) Make the Leaflet map
  const map = L.map('map').setView([-23, 25], 4);

  L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {
    attribution: 'Â© OpenStreetMap contributors'
  }).addTo(map);

  L.marker([-20.706790041949702, 25.359063235436718]).addTo(map)
    .bindPopup('Makgadikgadi Pans National Park')
    .openPopup();

  // 2) Add PMTiles raster (built by your workflow at docs/tiles/raster.pmtiles)
  try {
    const pmtilesUrl = '{{ "/tiles/raster.pmtiles" | relative_url }}';
    const p = new pmtiles.PMTiles(pmtilesUrl);

    // (optional) sanity check header
    p.getHeader().then(h => console.log('PMTiles header:', h)).catch(console.error);

    pmtiles.leafletRasterLayer(p, { opacity: 0.9 })
      .on('tileerror', (e) => console.error('Tile load error:', e))
      .addTo(map);
  } catch (err) {
    console.error('PMTiles init error:', err);
  }
});
</script>
