---
layout: default
title: Map
permalink: /map/
---

A map of southern Africa.

<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" crossorigin />
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" crossorigin></script>

<div id="map" style="height: 500px; width: 100%; margin-top: 1em;"></div>

<script>
document.addEventListener("DOMContentLoaded", function () {
  // expose globally so the PMTiles script can add layers
  window.map = L.map('map').setView([-23, 25], 4);

  L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {
    attribution: 'Â© OpenStreetMap contributors'
  }).addTo(window.map);

  L.marker([-20.706790041949702, 25.359063235436718]).addTo(window.map)
    .bindPopup('Makgadikgadi Pans National Park')
    .openPopup();
});
</script>

<!-- PMTiles global bundle (no ES module import needed) -->
<script src="https://unpkg.com/pmtiles@3.0.5/dist/pmtiles.js"></script>
<script>
  (function () {
    const pmtilesUrl = '{{ "/tiles/raster.pmtiles" | relative_url }}'; // served from docs/tiles/

    try {
      const p = new pmtiles.PMTiles(pmtilesUrl);
      pmtiles.leafletRasterLayer(p, { opacity: 0.9 })
        .on('tileerror', (e) => console.error('Tile load error:', e))
        .addTo(window.map);

      // Optional: log header to verify file is loading
      p.getHeader().then(h => console.log('PMTiles header:', h))
        .catch(err => console.error('PMTiles header error:', err));
    } catch (err) {
      console.error('PMTiles init error:', err);
    }
  })();
</script>
